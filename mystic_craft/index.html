<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mystic Craft Handmade Jewelry</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --primary:#8e44ad; --primary-dark:#7d3c98; --secondary:#e0c1f3; --accent:#ffb6c1;
      --light:#f9f5ff; --dark:#333; --gray:#777; --light-gray:#f0f0f0; --white:#fff;
      --shadow:0 4px 12px rgba(0,0,0,.08); --transition:all .3s ease;
    }
    body { font-family:'Poppins',sans-serif; background:var(--light); color:var(--dark); line-height:1.6; }
    h1,h2,h3,h4 { font-family:'Playfair Display',serif; font-weight:600; }

    /* Header */
    header { background:var(--white); box-shadow:var(--shadow); position:sticky; top:0; z-index:100; }
    .header-container { max-width:1200px; margin:0 auto; padding:12px 20px; display:flex; align-items:center; justify-content:space-between; }
    .logo { display:flex; align-items:center; gap:12px; text-decoration:none; }
    .logo img { width:44px; height:44px; border-radius:8px; object-fit:cover; }
    .logo-text { font-family:'Playfair Display',serif; font-weight:700; font-size:22px; color:var(--primary); letter-spacing:1px; }
    .logo-text span { font-size:12px; display:block; font-weight:400; letter-spacing:3px; color:var(--gray); }
    nav { display:flex; gap:20px; align-items:center; }
    .nav-icon { position:relative; font-size:20px; color:var(--dark); text-decoration:none; transition:var(--transition); }
    .nav-icon:hover { color:var(--primary); }
    .cart-count { position:absolute; top:-8px; right:-8px; background:var(--primary); color:var(--white); font-size:10px; width:18px; height:18px; border-radius:50%; display:flex; align-items:center; justify-content:center; }

    /* Hero */
    .hero {
      background: linear-gradient(rgba(142, 68, 173, 0.85), rgba(142, 68, 173, 0.85)),
        url('https://images.unsplash.com/photo-1605100804763-247f67b3557e?auto=format&fit=crop&w=1500&q=80') center/cover no-repeat;
      color:var(--white); text-align:center; padding:80px 20px;
    }
    .hero h1 { font-size:3rem; margin-bottom:14px; letter-spacing:1.5px; }
    .hero p { font-size:1.1rem; max-width:760px; margin:0 auto 26px; opacity:.95; }
    .hero .btn { margin:0 6px; }

    /* Buttons */
    .btn { display:inline-block; background:var(--primary); color:var(--white);
      padding:12px 30px; border-radius:30px; text-decoration:none; font-weight:500;
      transition:var(--transition); border:2px solid var(--primary); cursor:pointer; }
    .btn:hover { background:transparent; color:var(--white); transform:translateY(-3px); }
    .btn-outline { background:transparent; border:2px solid var(--white); }
    .btn-outline:hover { background:var(--white); color:var(--primary); }

    /* Section title */
    .section-title { text-align:center; margin:60px 0 40px; position:relative; }
    .section-title h2 { font-size:2.4rem; color:var(--primary); display:inline-block; padding-bottom:10px; }
    .section-title h2::after { content:''; position:absolute; bottom:0; left:50%; transform:translateX(-50%); width:80px; height:3px; background:var(--primary); }

    /* Products */
    .products { max-width:1200px; margin:0 auto 60px; padding:0 20px;
      display:grid; grid-template-columns:repeat(auto-fit, minmax(280px,1fr)); gap:30px; }
    .product { background:var(--white); border-radius:12px; overflow:hidden; box-shadow:var(--shadow); transition:var(--transition); position:relative; }
    .product:hover { transform:translateY(-8px); box-shadow:0 10px 25px rgba(0,0,0,.15); }
    .product-img { height:250px; overflow:hidden; }
    .product-img img { width:100%; height:100%; object-fit:cover; transition:var(--transition); }
    .product:hover .product-img img { transform:scale(1.08); }
    .product-badge { position:absolute; top:15px; left:15px; background:var(--primary); color:var(--white); padding:5px 12px; border-radius:20px; font-size:12px; font-weight:500; }
    .product-content { padding:20px; }
    .product-title { font-size:1.25rem; margin-bottom:8px; color:var(--dark); }
    .product-price { display:flex; align-items:center; gap:10px; margin-bottom:15px; }
    .product-price .current { font-weight:600; font-size:1.15rem; color:var(--primary); }
    .product-price .original { color:var(--gray); text-decoration:line-through; font-size:.92rem; }
    .product-actions { display:flex; justify-content:space-between; }
    .action-btn { width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; background:var(--light-gray); color:var(--dark); cursor:pointer; transition:var(--transition); }
    .action-btn:hover { background:var(--primary); color:var(--white); }

    /* Cart Sidebar */
    .cart-sidebar { position:fixed; top:0; right:-400px; width:100%; max-width:380px; height:100vh; background:var(--white); box-shadow:-5px 0 15px rgba(0,0,0,.1); z-index:1000; transition:var(--transition); padding:20px; display:flex; flex-direction:column; }
    .cart-sidebar.active { right:0; }
    .cart-header { display:flex; justify-content:space-between; align-items:center; padding-bottom:15px; border-bottom:1px solid var(--light-gray); margin-bottom:20px; }
    .cart-header h3 { font-size:1.5rem; color:var(--primary); }
    .close-cart { background:none; border:none; font-size:24px; cursor:pointer; color:var(--gray); transition:var(--transition); }
    .close-cart:hover { color:var(--primary); }
    .cart-items { flex:1; overflow-y:auto; margin-bottom:20px; }
    .cart-item { display:flex; gap:15px; padding:15px 0; border-bottom:1px solid var(--light-gray); }
    .cart-item-img { width:80px; height:80px; border-radius:8px; overflow:hidden; }
    .cart-item-img img { width:100%; height:100%; object-fit:cover; }
    .cart-item-details { flex:1; }
    .cart-item-title { font-weight:500; margin-bottom:5px; }
    .cart-item-price { color:var(--primary); font-weight:600; margin-bottom:8px; }
    .cart-item-actions { display:flex; align-items:center; gap:10px; }
    .quantity-btn { width:25px; height:25px; border-radius:50%; background:var(--light-gray); border:none; cursor:pointer; display:flex; align-items:center; justify-content:center; }
    .item-quantity { min-width:30px; text-align:center; }
    .remove-item { color:var(--gray); background:none; border:none; cursor:pointer; margin-left:auto; transition:var(--transition); }
    .remove-item:hover { color:#ff0000; }
    .cart-footer { border-top:1px solid var(--light-gray); padding-top:20px; }
    .cart-total { display:flex; justify-content:space-between; margin-bottom:20px; font-size:1.1rem; font-weight:600; }
    .checkout-btn { display:block; width:100%; padding:12px; background:var(--primary); color:var(--white); border:none; border-radius:6px; font-size:16px; font-weight:500; cursor:pointer; transition:var(--transition); }
    .checkout-btn:hover { background:var(--primary-dark); }
    .overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.5); z-index:999; display:none; }
    .overlay.active { display:block; }

    /* Chatbot */
    #chatbot { position:fixed; bottom:20px; right:20px; width:300px; max-height:400px; border-radius:15px; overflow:hidden; box-shadow:0 6px 20px rgba(0,0,0,.15); display:none; flex-direction:column; z-index:1001; background:var(--white); }
    #chatbot.active { display:flex; }
    #chat-header { background:var(--primary); color:var(--white); padding:15px; display:flex; align-items:center; gap:10px; }
    #chat-header img { width:22px; height:22px; border-radius:4px; }
    #chat-body { flex:1; background:var(--white); padding:15px; overflow-y:auto; font-size:14px; display:flex; flex-direction:column; gap:12px; }
    .chat-message { max-width:80%; padding:10px 15px; border-radius:18px; margin-bottom:5px; line-height:1.4; }
    .bot-message { background:var(--secondary); color:var(--dark); align-self:flex-start; border-bottom-left-radius:5px; }
    .user-message { background:var(--primary); color:var(--white); align-self:flex-end; border-bottom-right-radius:5px; }
    #chat-input { display:flex; border-top:1px solid var(--light-gray); padding:10px; background:var(--white); }
    #chat-input input { flex:1; border:1px solid var(--light-gray); padding:10px 15px; border-radius:30px; outline:none; font-size:14px; }
    #chat-input button { background:var(--primary); color:var(--white); border:none; width:40px; height:40px; border-radius:50%; margin-left:10px; cursor:pointer; transition:var(--transition); }
    #chat-input button:hover { background:var(--primary-dark); }
    #chat-toggle { position:fixed; bottom:20px; right:20px; background:var(--primary); color:var(--white); border:none; border-radius:50%; width:60px; height:60px; font-size:24px; cursor:pointer; box-shadow:0 6px 15px rgba(142,68,173,.4); z-index:1000; display:flex; align-items:center; justify-content:center; transition:var(--transition); }
    #chat-toggle:hover { transform:scale(1.1); }

    /* Payment modal (center popup) */
    #payment-modal { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%) scale(.9); background:var(--white); width:92%; max-width:420px; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,.15); padding:24px; z-index:1001; display:none; transition:all .25s ease; }
    #payment-modal.active { display:block; transform:translate(-50%,-50%) scale(1); }
    .payment-content h3 { color:var(--primary); margin-bottom:10px; font-size:1.4rem; }
    .payment-content p { margin-bottom:14px; color:var(--gray); }
    .payment-options { display:flex; flex-direction:column; gap:12px; }
    .close-payment { margin-top:16px; width:100%; background:var(--gray); color:white; border:none; padding:10px; border-radius:8px; cursor:pointer; }
    .close-payment:hover { background:#555; }
    #upi-section label { font-size:.9rem; font-weight:700; color:var(--primary); }
    #upi-section input { width:100%; padding:10px; margin-top:8px; border:1px solid #ccc; border-radius:6px; font-size:1rem; }

    /* Footer */
    footer { background:var(--dark); color:var(--white); text-align:center; padding:30px 20px; margin-top:60px; }
    .footer-content { max-width:1200px; margin:0 auto; }
    .footer-logo { display:flex; align-items:center; gap:10px; justify-content:center; margin-bottom:10px; }
    .footer-logo img { width:28px; height:28px; border-radius:6px; }
    .contact-info { margin:18px 0; font-size:16px; }
    .social-icons { display:flex; justify-content:center; gap:20px; margin:18px 0; }
    .social-icons a { color:var(--white); font-size:20px; transition:var(--transition); }
    .social-icons a:hover { color:var(--secondary); }
    .copyright { margin-top:20px; padding-top:16px; border-top:1px solid rgba(255,255,255,.1); font-size:14px; color:rgba(255,255,255,.7); }

    /* Responsive */
    @media (max-width:768px){ .hero h1{ font-size:2.4rem;} .hero p{ font-size:1rem;} .section-title h2{ font-size:2rem;} #chatbot{ width:calc(100% - 40px); max-height:70vh;} }
    @media (max-width:480px){ .header-container{ padding:10px 15px;} .logo-text{ font-size:18px;} .hero{ padding:60px 15px;} .hero h1{ font-size:2rem;} .btn{ padding:10px 20px; font-size:14px;} .products{ grid-template-columns:1fr;} }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-container">
      <a href="#" class="logo">
        <img src="assets/logo.png" alt="Mystic Craft Logo" />
        <div class="logo-text">MYSTIC CRAFT<span>HANDMADE JEWELRY</span></div>
      </a>
      <nav>
        <a href="admin.html" class="nav-icon" title="Admin">
          <i class="fas fa-tools"></i>
        </a>
        <a href="#" class="nav-icon" id="wishlist-icon" title="Wishlist">
          <i class="far fa-heart"></i>
        </a>
        <a href="#" class="nav-icon" id="cart-icon" title="Cart">
          <i class="fas fa-shopping-bag"></i><span class="cart-count">0</span>
        </a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <h1>Handcrafted Elegance</h1>
    <p>Discover our exquisite collection of handcrafted jewelry, each piece meticulously designed to bring out your inner radiance and charm.</p>
    <div class="hero-btns">
      <a href="#products" class="btn">Shop Collection</a>
      <a href="#" class="btn btn-outline">Learn More</a>
    </div>
  </section>

  <!-- Products -->
  <section id="products">
    <div class="section-title"><h2>Featured Collection</h2></div>
    <div class="products">
      <div class="product">
        <div class="product-img">
          <img src="https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?auto=format&fit=crop&w=774&q=80" alt="Amethyst Necklace">
        </div>
        <div class="product-badge">NEW</div>
        <div class="product-content">
          <h3 class="product-title">Amethyst Pendant Necklace</h3>
          <div class="product-price"><span class="current">₹1,850</span><span class="original">₹2,200</span></div>
          <div class="product-actions">
            <div class="action-btn" onclick="addToWishlist(1)"><i class="far fa-heart"></i></div>
            <div class="action-btn" onclick="addToCart(1)"><i class="fas fa-shopping-bag"></i></div>
          </div>
        </div>
      </div>

      <div class="product">
        <div class="product-img">
          <img src="https://images.unsplash.com/photo-1606760227091-3dd870d97f1d?auto=format&fit=crop&w=774&q=80" alt="Silver Bracelet">
        </div>
        <div class="product-content">
          <h3 class="product-title">Silver Charm Bracelet</h3>
          <div class="product-price"><span class="current">₹1,450</span><span class="original">₹1,800</span></div>
          <div class="product-actions">
            <div class="action-btn" onclick="addToWishlist(2)"><i class="far fa-heart"></i></div>
            <div class="action-btn" onclick="addToCart(2)"><i class="fas fa-shopping-bag"></i></div>
          </div>
        </div>
      </div>

      <div class="product">
        <div class="product-img">
          <img src="https://images.unsplash.com/photo-1605100804763-247f67b3557e?auto=format&fit=crop&w=774&q=80" alt="Moonstone Earrings">
        </div>
        <div class="product-badge">BEST SELLER</div>
        <div class="product-content">
          <h3 class="product-title">Moonstone Drop Earrings</h3>
          <div class="product-price"><span class="current">₹1,250</span><span class="original">₹1,500</span></div>
          <div class="product-actions">
            <div class="action-btn" onclick="addToWishlist(3)"><i class="far fa-heart"></i></div>
            <div class="action-btn" onclick="addToCart(3)"><i class="fas fa-shopping-bag"></i></div>
          </div>
        </div>
      </div>

      <div class="product">
        <div class="product-img">
          <img src="https://images.unsplash.com/photo-1610397647271-81d588bc7d9d?auto=format&fit=crop&w=774&q=80" alt="Turquoise Ring">
        </div>
        <div class="product-content">
          <h3 class="product-title">Turquoise Statement Ring</h3>
          <div class="product-price"><span class="current">₹950</span><span class="original">₹1,200</span></div>
          <div class="product-actions">
            <div class="action-btn" onclick="addToWishlist(4)"><i class="far fa-heart"></i></div>
            <div class="action-btn" onclick="addToCart(4)"><i class="fas fa-shopping-bag"></i></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Overlays & Sidebars -->
  <div class="overlay" id="overlay"></div>
  <div class="cart-sidebar" id="cart-sidebar">
    <div class="cart-header">
      <h3>Your Shopping Bag</h3>
      <button class="close-cart" id="close-cart"><i class="fas fa-times"></i></button>
    </div>
    <div class="cart-items" id="cart-items">
      <div class="empty-cart-message"><p>Your cart is empty</p></div>
    </div>
    <div class="cart-footer">
      <div class="cart-total"><span>Total:</span><span id="cart-total">₹0</span></div>
      <button class="checkout-btn" id="checkout-btn">Proceed to Checkout</button>
    </div>
  </div>

  <!-- Payment Modal -->
  <div class="overlay" id="payment-overlay"></div>
  <div id="payment-modal">
    <div class="payment-content">
      <h3>Choose Payment Method</h3>
      <p>Select your preferred option to complete the checkout:</p>
      <div class="payment-options">
        <button class="checkout-btn" onclick="showUPI()">Pay with UPI</button>
        <button class="checkout-btn" onclick="processPayment('Google Pay')">Pay with Google Pay</button>
        <button class="checkout-btn" onclick="processPayment('PhonePe')">Pay with PhonePe</button>
        <button class="checkout-btn" onclick="processPayment('Bank Transfer')">Pay via Bank Transfer</button>
      </div>
      <div id="upi-section" style="display:none; margin-top:20px;">
        <label for="upiId">Enter UPI ID:</label>
        <input type="text" id="upiId" placeholder="example@upi" />
        <button class="checkout-btn" style="margin-top:12px;" onclick="submitUPI()">Confirm Payment</button>
      </div>
      <button class="close-payment" onclick="closePayment()">Cancel</button>
    </div>
  </div>

  <!-- Chatbot -->
  <div id="chatbot">
    <div id="chat-header">
      <img src="assets/logo.png" alt="logo">
      <h3>Maya - Your Jewelry Assistant</h3>
    </div>
    <div id="chat-body">
      <div class="chat-message bot-message"><b>Maya:</b> Hi! 👋 Welcome to Mystic Craft Jewelry. How can I help you today?</div>
      <div class="chat-message bot-message"><b>Maya:</b> I can assist with orders, shipping info, product details, or help you find the perfect gift! 💎</div>
    </div>
    <div id="chat-input">
      <input type="text" id="userInput" placeholder="Type your message...">
      <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
    </div>
  </div>
  <button id="chat-toggle"><i class="fas fa-comment-alt"></i></button>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-logo">
        <img src="assets/logo.png" alt="logo"/><span class="logo-text" style="color:white;">MYSTIC CRAFT</span>
      </div>
      <p class="tagline">Handcrafted jewelry with love and passion</p>
      <div class="contact-info">
        <p>Email: mysticcrafthandmadejewelry@gmail.com</p>
        <p>Phone: +91 98765 43210</p>
      </div>
      <div class="social-icons">
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="#"><i class="fab fa-pinterest-p"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
      </div>
      <div class="copyright">
        <p>&copy; 2025 Mystic Craft Handmade Jewelry. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // Product data
    const products = [
      { id:1, name:"Amethyst Pendant Necklace", price:1850, image:"https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?auto=format&fit=crop&w=774&q=80" },
      { id:2, name:"Silver Charm Bracelet", price:1450, image:"https://images.unsplash.com/photo-1606760227091-3dd870d97f1d?auto=format&fit=crop&w=774&q=80" },
      { id:3, name:"Moonstone Drop Earrings", price:1250, image:"https://images.unsplash.com/photo-1605100804763-247f67b3557e?auto=format&fit=crop&w=774&q=80" },
      { id:4, name:"Turquoise Statement Ring", price:950, image:"https://images.unsplash.com/photo-1610397647271-81d588bc7d9d?auto=format&fit=crop&w=774&q=80" }
    ];

    // Cart + Wishlist
    let cart = [];
    let wishlist = [];

    // DOM elements
    const cartIcon = document.getElementById('cart-icon');
    const closeCart = document.getElementById('close-cart');
    const cartSidebar = document.getElementById('cart-sidebar');
    const overlay = document.getElementById('overlay');
    const cartItems = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');
    const cartCount = document.querySelector('.cart-count');
    const checkoutBtn = document.getElementById('checkout-btn');
    const wishlistIcon = document.getElementById('wishlist-icon');
    const chatToggle = document.getElementById('chat-toggle');
    const chatbot = document.getElementById('chatbot');
    const userInput = document.getElementById('userInput');
    const chatBody = document.getElementById('chat-body');

    // Payment modal elements
    const paymentModal = document.getElementById('payment-modal');
    const paymentOverlay = document.getElementById('payment-overlay');

    // Init
    updateCartCount();

    // Event listeners
    cartIcon.addEventListener('click', openCart);
    closeCart.addEventListener('click', closeCartSidebar);
    overlay.addEventListener('click', closeCartSidebar);
    checkoutBtn.addEventListener('click', checkout);
    chatToggle.addEventListener('click', toggleChatbot);

    // Cart sidebar
    function openCart(){ cartSidebar.classList.add('active'); overlay.classList.add('active'); renderCartItems(); }
    function closeCartSidebar(){ cartSidebar.classList.remove('active'); overlay.classList.remove('active'); }

    // Chatbot
    function toggleChatbot(){ chatbot.classList.toggle('active'); }
    function sendMessage(){
      const message = userInput.value.trim(); if(!message) return;
      const userMessage = document.createElement('div');
      userMessage.className='chat-message user-message'; userMessage.innerHTML=`<b>You:</b> ${message}`; chatBody.appendChild(userMessage);
      userInput.value=''; chatBody.scrollTop = chatBody.scrollHeight;
      setTimeout(()=>{
        let m = message.toLowerCase(); let botResponse='';
        if(m.includes('hello')||m.includes('hi')) botResponse="Hello there! 😊 How can I assist you with our jewelry collection today?";
        else if(m.includes('order')||m.includes('status')) botResponse="For order status, please provide your order number. You can also check your order history in your account section.";
        else if(m.includes('shipping')||m.includes('delivery')) botResponse="We offer standard shipping (3-5 business days) and express shipping (1-2 business days).";
        else if(m.includes('return')||m.includes('exchange')) botResponse="We offer a 30-day return policy. Email us at mysticcrafthandmadejewelry@gmail.com for assistance.";
        else if(m.includes('material')||m.includes('quality')) botResponse="All our jewelry is handcrafted using sterling silver, 14k gold fill, and genuine gemstones.";
        else if(m.includes('gift')||m.includes('present')) botResponse="We offer complimentary gift wrapping with a personalized message. Select the gift option at checkout!";
        else botResponse="I'd be happy to help! Ask about products, shipping, returns, or materials. For more help, email mysticcrafthandmadejewelry@gmail.com.";
        const botMessage=document.createElement('div'); botMessage.className='chat-message bot-message'; botMessage.innerHTML=`<b>Maya:</b> ${botResponse}`; chatBody.appendChild(botMessage);
        chatBody.scrollTop = chatBody.scrollHeight;
      }, 600);
    }
    userInput.addEventListener('keypress', (e)=>{ if(e.key==='Enter'){ sendMessage(); } });

    // Cart functions
    function addToCart(id){
      const product = products.find(p=>p.id===id);
      const existing = cart.find(i=>i.id===id);
      if(existing){ existing.quantity+=1; } else { cart.push({...product, quantity:1}); }
      updateCartCount(); renderCartItems(); showNotification(`${product.name} added to cart!`);
    }
    function addToWishlist(id){
      const product = products.find(p=>p.id===id);
      if(!wishlist.includes(id)){ wishlist.push(id); showNotification(`${product.name} added to wishlist!`); wishlistIcon.innerHTML='<i class="fas fa-heart"></i>'; }
      else { wishlist = wishlist.filter(x=>x!==id); wishlistIcon.innerHTML='<i class="far fa-heart"></i>'; }
    }
    function updateCartCount(){
      const count = cart.reduce((t,i)=>t+i.quantity,0); cartCount.textContent = count;
      const total = cart.reduce((s,i)=>s+(i.price*i.quantity),0); cartTotal.textContent = `₹${total}`;
    }
    function renderCartItems(){
      if(cart.length===0){ cartItems.innerHTML = '<div class="empty-cart-message"><p>Your cart is empty</p><p>Add some beautiful jewelry!</p></div>'; cartTotal.textContent='₹0'; return; }
      cartItems.innerHTML='';
      cart.forEach(item=>{
        const el = document.createElement('div'); el.className='cart-item';
        el.innerHTML = `
          <div class="cart-item-img"><img src="${item.image}" alt="${item.name}"/></div>
          <div class="cart-item-details">
            <div class="cart-item-title">${item.name}</div>
            <div class="cart-item-price">₹${item.price}</div>
            <div class="cart-item-actions">
              <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
              <span class="item-quantity">${item.quantity}</span>
              <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
              <button class="remove-item" onclick="removeFromCart(${item.id})"><i class="fas fa-trash"></i></button>
            </div>
          </div>`;
        cartItems.appendChild(el);
      });
      updateCartCount();
    }
    function updateQuantity(id, change){
      const item = cart.find(i=>i.id===id); if(!item) return;
      item.quantity += change; if(item.quantity<=0){ cart = cart.filter(i=>i.id!==id); }
      updateCartCount(); renderCartItems();
    }
    function removeFromCart(id){ cart = cart.filter(i=>i.id!==id); updateCartCount(); renderCartItems(); }

    // Payment saving utility
    async function savePayment(details){
      try{
        const res = await fetch('/api/payments', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(details)});
        if(!res.ok) throw new Error('Server responded ' + res.status);
      }catch(err){
        // Fallback to localStorage if server not reachable
        let payments = JSON.parse(localStorage.getItem('payments')) || [];
        payments.push(details);
        localStorage.setItem('payments', JSON.stringify(payments));
      }
    }

    // Checkout -> open payment modal
    function checkout(){
      if(cart.length===0){ alert('Your cart is empty!'); return; }
      closeCartSidebar();
      paymentModal.classList.add('active'); paymentOverlay.classList.add('active');
    }
    function closePayment(){ paymentModal.classList.remove('active'); paymentOverlay.classList.remove('active'); document.getElementById('upi-section').style.display='none'; }

    function showUPI(){ document.getElementById('upi-section').style.display='block'; }
    function submitUPI(){
      const upiId = document.getElementById('upiId').value.trim();
      if(!upiId){ alert('Please enter a valid UPI ID.'); return; }
      const details = { method:'UPI', upiId, date:new Date().toLocaleString(), cartItems:[...cart] };
      savePayment(details);
      cart = []; updateCartCount(); renderCartItems(); closePayment();
      alert('UPI details saved.');
    }
    function processPayment(method){
      const details = { method, date:new Date().toLocaleString(), cartItems:[...cart] };
      savePayment(details);
      cart = []; updateCartCount(); renderCartItems(); closePayment();
      alert(method + ' selected. Payment details saved.');
    }

    // Notifications
    function showNotification(message){
      const note = document.createElement('div');
      note.className='notification'; note.textContent=message;
      note.style.cssText='position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:var(--primary); color:white; padding:12px 24px; border-radius:30px; box-shadow:0 4px 12px rgba(0,0,0,.15); z-index:1000; animation:fadeInOut 3s ease;';
      document.body.appendChild(note); setTimeout(()=>note.remove(), 3000);
    }
    const style = document.createElement('style'); style.textContent='@keyframes fadeInOut{0%{opacity:0;transform:translate(-50%,20px);}10%{opacity:1;transform:translate(-50%,0);}90%{opacity:1;}100%{opacity:0;transform:translate(-50%,20px);}}'; document.head.appendChild(style);
  </script>
</body>
</html>
